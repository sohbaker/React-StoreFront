{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ellehallal/Documents/week-17/React-StoreFront/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/ellehallal/Documents/week-17/React-StoreFront/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/Users/ellehallal/Documents/week-17/React-StoreFront/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/Users/ellehallal/Documents/week-17/React-StoreFront/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/ellehallal/Documents/week-17/React-StoreFront/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ellehallal/Documents/week-17/React-StoreFront/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ellehallal/Documents/week-17/React-StoreFront/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ellehallal/Documents/week-17/React-StoreFront/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ellehallal/Documents/week-17/React-StoreFront/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/ellehallal/Documents/week-17/React-StoreFront/src/App.js\";\nimport React from \"react\";\nimport Item from \"./components/Item\";\nimport Cart from \"./components/Cart\";\nimport NavBar from \"./components/NavBar\";\nimport \"./App.css\";\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.addCartQuantityKey = function () {\n      var shopItems = _toConsumableArray(_this.state.data);\n\n      shopItems.forEach(function (item) {\n        item[\"cart_quantity\"] = 0;\n      });\n\n      _this.setState({\n        data: shopItems\n      });\n    };\n\n    _this.setItemPrice = function () {\n      var shopItems = _toConsumableArray(_this.state.data);\n\n      shopItems.forEach(function (item) {\n        var currentPrice = item.price;\n        var newPrice = currentPrice / 100;\n        item[\"price\"] = newPrice.toFixed(2);\n      });\n\n      _this.setState({\n        data: shopItems\n      });\n    };\n\n    _this.handleAddClick = function (id) {\n      var items = _toConsumableArray(_this.state.data);\n\n      var item = _objectSpread({}, items[id]);\n\n      if (item.shop_quantity > 0) {\n        item.shop_quantity -= 1;\n        item.cart_quantity += 1;\n        items[id] = item;\n\n        _this.setState({\n          data: items\n        });\n      }\n    };\n\n    _this.handleMinusClick = function (id) {\n      var items = _toConsumableArray(_this.state.data);\n\n      var item = _objectSpread({}, items[id]);\n\n      if (item.cart_quantity >= 1) {\n        item.shop_quantity += 1;\n        item.cart_quantity -= 1;\n        items[id] = item;\n\n        _this.setState({\n          data: items\n        });\n      }\n    };\n\n    _this.handleRemoveClick = function (id) {\n      var items = _toConsumableArray(_this.state.data);\n\n      var item = _objectSpread({}, items[id]);\n\n      var resetQuantity = item.shop_quantity + item.cart_quantity;\n      item.shop_quantity = resetQuantity;\n      item.cart_quantity = 0;\n      items[id] = item;\n\n      _this.setState({\n        data: items\n      });\n    };\n\n    _this.showCart = function () {\n      var data = _this.state.data;\n      var showCart;\n      var checkCartQuantity = data.some(function (item) {\n        return item.cart_quantity > 0;\n      });\n\n      if (checkCartQuantity) {\n        showCart = React.createElement(Cart, {\n          data: _this.state.data,\n          onIncrement: _this.handleAddClick,\n          onDecrement: _this.handleMinusClick,\n          onRemove: _this.handleRemoveClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        });\n      }\n\n      return showCart;\n    };\n\n    _this.state = {\n      data: [],\n      responseError: \"\",\n      errorMessage: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.makeApiRequest();\n\n              case 2:\n                this.addCartQuantityKey();\n                this.setItemPrice();\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"makeApiRequest\",\n    value: function () {\n      var _makeApiRequest = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var response, json;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return fetch(\"https://api.myjson.com/bins/7ss86\");\n\n              case 3:\n                response = _context2.sent;\n\n                if (response.ok) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                this.setState({\n                  responseError: response.statusText\n                });\n                throw Error(response.statusText);\n\n              case 7:\n                _context2.next = 9;\n                return response.json();\n\n              case 9:\n                json = _context2.sent;\n                this.setState({\n                  data: json.products\n                });\n                _context2.next = 16;\n                break;\n\n              case 13:\n                _context2.prev = 13;\n                _context2.t0 = _context2[\"catch\"](0);\n                this.setState({\n                  errorMessage: _context2.t0\n                });\n\n              case 16:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 13]]);\n      }));\n\n      function makeApiRequest() {\n        return _makeApiRequest.apply(this, arguments);\n      }\n\n      return makeApiRequest;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var data = this.state.data;\n      var showProducts = data.map(function (data) {\n        return React.createElement(Item, {\n          key: data.id,\n          id: data.id,\n          name: data.name,\n          price: data.price,\n          image: data.image,\n          category: data.category,\n          quantity: data.shop_quantity,\n          onClick: function onClick(id) {\n            return _this2.handleAddClick(data.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        });\n      });\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(NavBar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"items-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, showProducts), React.createElement(\"div\", {\n        className: \"cart-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, this.showCart())));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport { App as default };","map":{"version":3,"sources":["/Users/ellehallal/Documents/week-17/React-StoreFront/src/App.js"],"names":["React","Item","Cart","NavBar","App","props","addCartQuantityKey","shopItems","state","data","forEach","item","setState","setItemPrice","currentPrice","price","newPrice","toFixed","handleAddClick","id","items","shop_quantity","cart_quantity","handleMinusClick","handleRemoveClick","resetQuantity","showCart","checkCartQuantity","some","responseError","errorMessage","makeApiRequest","fetch","response","ok","statusText","Error","json","products","showProducts","map","name","image","category","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Item from \"./components/Item\";\nimport Cart from \"./components/Cart\";\nimport NavBar from \"./components/NavBar\";\nimport \"./App.css\";\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      responseError: \"\",\n      errorMessage: \"\"\n    };\n  }\n\n  async componentDidMount() {\n    await this.makeApiRequest();\n    this.addCartQuantityKey();\n    this.setItemPrice();\n  }\n\n  async makeApiRequest() {\n    try {\n      const response = await fetch(\"https://api.myjson.com/bins/7ss86\");\n      if (!response.ok) {\n        this.setState({ responseError: response.statusText });\n        throw Error(response.statusText);\n      }\n      const json = await response.json();\n      this.setState({ data: json.products });\n    } catch (error) {\n      this.setState({ errorMessage: error });\n    }\n  }\n\n  addCartQuantityKey = () => {\n    let shopItems = [...this.state.data];\n    shopItems.forEach(item => {\n      item[\"cart_quantity\"] = 0;\n    });\n    this.setState({ data: shopItems });\n  };\n\n  setItemPrice = () => {\n    let shopItems = [...this.state.data];\n    shopItems.forEach(item => {\n      const currentPrice = item.price;\n      const newPrice = currentPrice / 100;\n      item[\"price\"] = newPrice.toFixed(2);\n    });\n    this.setState({ data: shopItems });\n  };\n\n  handleAddClick = id => {\n    let items = [...this.state.data];\n    let item = { ...items[id] };\n    if (item.shop_quantity > 0) {\n      item.shop_quantity -= 1;\n      item.cart_quantity += 1;\n      items[id] = item;\n      this.setState({ data: items });\n    }\n  };\n\n  handleMinusClick = id => {\n    let items = [...this.state.data];\n    let item = { ...items[id] };\n    if (item.cart_quantity >= 1) {\n      item.shop_quantity += 1;\n      item.cart_quantity -= 1;\n      items[id] = item;\n      this.setState({ data: items });\n    }\n  };\n\n  handleRemoveClick = id => {\n    let items = [...this.state.data];\n    let item = { ...items[id] };\n    let resetQuantity = item.shop_quantity + item.cart_quantity;\n    item.shop_quantity = resetQuantity;\n    item.cart_quantity = 0;\n    items[id] = item;\n    this.setState({ data: items });\n  };\n\n  showCart = () => {\n    const { data } = this.state;\n    let showCart;\n\n    const checkCartQuantity = data.some(item => item.cart_quantity > 0);\n    if (checkCartQuantity) {\n      showCart = (\n        <Cart\n          data={this.state.data}\n          onIncrement={this.handleAddClick}\n          onDecrement={this.handleMinusClick}\n          onRemove={this.handleRemoveClick}\n        />\n      );\n    }\n    return showCart;\n  };\n\n  render() {\n    const { data } = this.state;\n    const showProducts = data.map(data => {\n      return (\n        <Item\n          key={data.id}\n          id={data.id}\n          name={data.name}\n          price={data.price}\n          image={data.image}\n          category={data.category}\n          quantity={data.shop_quantity}\n          onClick={id => this.handleAddClick(data.id)}\n        />\n      );\n    });\n    return (\n      <div>\n        <NavBar />\n        <div className=\"container\">\n          <div className=\"items-container\">{showProducts}</div>\n          <div className=\"cart-container\">{this.showCart()}</div>\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}